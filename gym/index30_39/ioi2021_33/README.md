## PA
首先每个元素只会在四个位置。

然后由于大行和大列要统一，我们经过背的结论或者打表可知，如果每行每列都操作偶数次（即只改变这四个，外面的不变），那么所有偶置换都行。

于是剩下的就是置换奇偶性的问题，一行或一列会改变所有奇偶性，然后由于是超定的，对于这种矩阵的我们特别擅长。

发现可以只取左上角四分之一的，然后直接得出每行每列是否是奇数，剩下的通过构造或者打表处理剩下的偶置换即可。

## EH
智商不够………………被暴打……场上遇到要自闭了………………

首先考虑换成序列上问题，显然。

然后看着样例，想想答案会不会很大？

模拟起来看起来很大，但是再看看题目~~题解~~，发现题目有一个条件：

**两个端点不在一条边上**

也就是我们一定能拿出对角线的上的点拿来鸽。

而我们模拟出来很大的答案，数据是不合法的。是在同一条边上的。

那么剩下的问题就是判答案为 $1$ 时，即分成两个集合。

按左端点排序即可。

这道题告诉我们，要~~好好看题目，分析题目里每一个条件。~~有智商。

## TH
把边按时间排序随便搞搞就好。
