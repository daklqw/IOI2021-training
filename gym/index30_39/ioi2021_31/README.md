## AE
和进入顺序有关，那么起始点最小表示法。

不超过 $n$ 步就能走到所有连通的点，那么就 dp $n$ 次来 hash。

如果是取模乘法 hash，$n^3$ 做法很好实现，只需要前缀和一下。

偷懒选手用 xorshift 直接跑 $n^4$。

## CB
显然跑完正反图最短路 $f, g$ 之后一个集合的贡献是 $(|S| - 1) \sum_{i \in S} (f_i+g_i)$。

再发现集合划分的权值大小是连续的，两个集合不会出现交叉，即例如 $\{\{1, 3\}, \{2, 4\}\}$，调整法可证。

然后排序后变成划分 DP，这个前缀和一看就很凸，显然是四边形不等式。

不得不说，我写的 smawk 真慢上天了，连平方 log 都打不过……

## TC
题目读错也太/px了，花了我好几个小时搞懂我看错了题。

然后就是简单的模拟。
