## BJ
北京！

首先面积很好表示，就是 $ax - by = n (a, b, x > 0, b < 0)$，令 $b' = -b$

实际上就是 $ax + b'y = n$。

实际上就是一个卷积。不要像我想歪到 exgcd 里去了。

## NC
我很 NC……

首先显然从右往左扫描线 DP。

然后发现根据一个矩形左边还是右边，进行容斥。

例如

<pre>
----
B
B[----]
...
B
B
A[----]
A|    |
A|    |
A[----]
 x     y
<pre>

A 处值显然是 $x$。

然后对于所有的 B，显然转移之前都是不能访问只有 $x$ 能访问的。

所以 B 处是原先值加上只有 $x$ 能访问到的即 $y - x$。

那么我们在 $y$ 处先查询这个值，然后拿来用（可持久化它真的行吗？）

由于我们花的区间加法需要查询上面第一堵横墙，所以还要维护一个支持 `lower_bound` 的数据结构。

注意 B 的范围，它不会因为上面另一个矩形的结束而终止，而和花一样，也是第一堵横墙。

注意这个横墙不是上面最后一个加入的新矩形……因此在一个盒子里的情况我就会算多……我对拍写不来，这个就调了贼久……

## FK
很难的一道题。

首先我们要做到方程的合并。

根据 CRT，观察第一个样例，很容易发现，如果两个周期互质，则概率是其乘积。

如果两个周期 $gcd > 1$，我们枚举模这个 $gcd$ 余几，剩下的还是可以 CRT。

所以呢？如果我们能找到一个公共的周期，使得剩下的数要么互质，要么相同即可。

一个显然的想法，就是取 $2^6\times3^4 \dots$，但是想一想，好像多余了。

因为如果我们除完公共周期和自己周期的gcd后，如果有 $2$ 和 $4$，可以把 $2$ 变成 $4$。

那么这样构造一发得到 $2^3 \times 3^2 \times 5 \times 7$ 就行了。
