## IK
好像有点困难……我比较菜……

首先发现一定是某个形状上面加一堆边。

树？不对，是环。

然后我们枚举用哪些边，然后环上的一定有一些连续区间？

啥啊，找这个环就是这道题本身的问题啊。

不过想想这个连续区间，是一条链。也就是我们把所有出度入度都为 $1$ 的点缩起来，就变成了一个度数小于等于 $40$ 的图。

剩下再枚举路径，相当于枚举选哪几条边。复杂度应该就是 $O(2^{20} \times n)$。

## CA
首先将不等式变形，我们得到一个必要条件，即在什么时候之前必须加一。

再考虑无穷的事情，将时间相减，发现实际上以 $\sum_{a_i}$ 为周期即可。

因为我们只用了 $nf_i - 1 < s_i$，再考虑不等式另一边，即存在方案使得不会超过。

如果一个时刻 $n - 1$ 所有的 $+1$ 都会超过，即 $s_i \geq f_i n$，则 $\sum_i s_i \geq n > n - 1$，矛盾，所以右边可以满足。

然后写一个堆跑 $m$ 遍即可。
