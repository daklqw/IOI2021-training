## OJ
直接 LCT 维护最小生成树即可。

可持久化来区间查询。

注意强在是减法。

## MD
一开始只想到基于归并的做法，只能做64/kk

然后想了想可以均匀地分配，让这样能做格子数个，而且只要我们将段分组，就能递归地做下去。

每一段的分到一个格子，然后递归下去做，这样子只要计算出每个格子能给多长的段排序。

然后dp完发现只有两万多，差一点点。

然后发现实际上 (5, 6) 处直接这么做只有 $1$，不优，我们随便讨论下都能做到 $2$。

那么特判一下这里发现就够 4w 了。
